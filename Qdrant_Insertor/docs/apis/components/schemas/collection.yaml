# Collection Schemas

CollectionResponse:
  type: object
  description: |
    集合响应对象，包含集合的完整信息和统计数据。
    
    ## 集合概念
    
    集合是文档的逻辑分组单位，具有以下特点：
    - **文档组织**: 将相关文档组织在一起
    - **搜索范围**: 可以限制搜索在特定集合内进行
    - **权限控制**: 可以基于集合实现访问控制
    - **配置隔离**: 不同集合可以有不同的处理配置
    
    ## 统计数据
    
    集合响应包含实时统计数据：
    - **文档数量**: 集合中的文档总数
    - **文本块数量**: 所有文档的文本块总数
    - **时间信息**: 创建和最后更新时间
    
    ## 使用场景
    
    - **集合管理**: 在管理界面显示集合信息
    - **文档组织**: 为用户提供文档分类选项
    - **权限控制**: 基于集合实现访问控制
    - **统计分析**: 生成集合使用统计报告
  properties:
    collectionId:
      type: string
      description: |
        集合的唯一标识符。
        
        **格式**: 基于集合名称生成的唯一字符串
        **用途**: 在API中引用集合
        **特点**: 不可更改，与集合生命周期一致
      example: "tech-docs"
    name:
      type: string
      description: |
        集合的名称。
        
        **用途**: 在用户界面中显示和识别集合
        **要求**: 在系统中必须唯一
        **更改**: 可以通过API更新
        **限制**: 长度和字符集可能有限制
      example: "技术文档"
    description:
      type: string
      description: |
        集合的描述信息。
        
        **用途**: 提供集合的详细说明和用途
        **内容**: 可以包含集合的用途、包含的文档类型等
        **可选性**: 可选字段，可以为空
        **格式**: 支持多行文本
      nullable: true
      example: "技术相关的文档集合，包括API文档、开发指南等"
    docCount:
      type: integer
      description: |
        集合中的文档数量。
        
        **计算**: 实时统计，不包括已删除的文档
        **用途**: 了解集合的规模和内容量
        **更新**: 文档添加或删除时自动更新
      example: 25
    chunkCount:
      type: integer
      description: |
        集合中所有文档的文本块总数。
        
        **计算**: 所有文档的文本块数量之和
        **用途**: 了解集合的详细程度和搜索范围
        **关系**: 通常大于文档数量（一个文档有多个块）
      example: 156
    createdAt:
      type: integer
      format: int64
      description: |
        集合创建时的时间戳。
        
        **格式**: Unix时间戳（毫秒）
        **用途**: 跟踪集合创建时间和排序
        **时区**: UTC
        **不变性**: 创建后不会更改
      example: 1672531200000
    updatedAt:
      type: integer
      format: int64
      description: |
        集合最后更新时的时间戳。
        
        **格式**: Unix时间戳（毫秒）
        **用途**: 跟踪集合修改时间
        **触发**: 集合信息更新或文档变更时更新
        **时区**: UTC
      example: 1672617600000
  required:
    - collectionId
    - name
    - createdAt

CreateCollectionRequest:
  type: object
  description: |
    创建集合请求对象，用于创建新的文档集合。
    
    ## 创建过程
    
    创建集合时系统会：
    1. **验证名称**: 检查名称是否唯一且符合要求
    2. **生成ID**: 基于名称生成唯一的集合ID
    3. **初始化统计**: 设置初始统计值为0
    4. **记录时间**: 记录创建时间戳
    
    ## 命名规则
    
    - **唯一性**: 名称在整个系统中必须唯一
    - **字符集**: 通常支持字母、数字、连字符和下划线
    - **长度**: 可能有最小和最大长度限制
    - **特殊字符**: 避免使用特殊字符和空格
    
    ## 使用场景
    
    - **主题分类**: 按主题或领域创建集合
    - **部门隔离**: 按部门或团队创建集合
    - **项目组织**: 按项目创建集合
    - **权限管理**: 为不同用户组创建专用集合
  properties:
    name:
      type: string
      description: |
        集合的名称，必须是唯一的。
        
        **要求**: 在整个系统中必须唯一
        **用途**: 在用户界面中显示和识别集合
        **ID生成**: 系统会基于此名称生成集合ID
        **建议**: 使用描述性强、简洁的名称
      example: "技术文档"
    description:
      type: string
      description: |
        集合的可选描述。
        
        **用途**: 提供集合的详细说明和用途
        **内容**: 可以描述集合的用途、包含的文档类型等
        **可选性**: 可选字段，可以不提供
        **格式**: 支持多行文本和Markdown格式
      example: "技术相关的文档集合，包括API文档、开发指南等"
  required:
    - name

UpdateCollectionRequest:
  type: object
  description: |
    更新集合请求对象，用于修改集合的名称和/或描述。
    
    ## 更新类型
    
    此对象支持两种更新方式：
    - **完整更新(PUT)**: 必须提供所有字段，未提供的字段会被清空
    - **部分更新(PATCH)**: 只提供需要更新的字段，未提供的字段保持不变
    
    ## 更新影响
    
    - **名称更改**: 会影响集合ID（某些情况下）或显示名称
    - **描述更改**: 只影响显示信息，不影响功能
    - **文档关联**: 更新不会影响集合中的文档
    - **统计数据**: 统计数据保持不变
    
    ## 注意事项
    
    - **名称唯一性**: 新名称必须在整个系统中唯一
    - **ID不变**: 集合ID通常不会更改
    - **时间戳**: 更新会自动修改最后更新时间
  properties:
    name:
      type: string
      description: |
        集合的新名称。
        
        **要求**: 在整个系统中必须唯一
        **用途**: 更新集合的显示名称
        **影响**: 可能影响用户界面的显示
        **注意**: 更新前请确认名称的唯一性
      example: "技术文档库"
    description:
      type: string
      description: |
        集合的新描述。
        
        **用途**: 更新集合的详细说明
        **内容**: 可以更新集合的用途、包含的文档类型等
        **可选性**: 可以设置为空字符串来清除描述
        **格式**: 支持多行文本和Markdown格式
      example: "更新后的技术文档集合描述"